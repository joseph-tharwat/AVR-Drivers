

/* 
 * File:   
 * Author: Joseph Tharwat
 * Comments:
 * Revision history: 
 */

#ifndef TIMER_PRIV_H
#define	TIMER_PRIV_H

#define TCNT0  (*((volatile u8 *)0x52)) //timer register

#define OCR0   (*((volatile u8 *)0x5C)) //compare register
/////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////
#define TIFR   (*((volatile u8 *)0x58)) //timer interrupt flag
#define TOV0 0  //Timer/Counter0 Overflow Flag
#define OCF0 1  //Output Compare Flag 0
/////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////
#define TIMSK  (*((volatile u8 *)0x59)) //Interrupt Mask register
#define TOIE0 0     //Timer/Counter0 Output Compare Match Interrupt Enable
#define OCIE0 1     //Timer/Counter0 Overflow Interrupt Enable
/////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////
#define TCCR0  (*((volatile u8 *)0x53)) //timer control
/*
 *Set in initialization function
 000 >  No clock source (Timer/Counter stopped)
 001 > clk/(No prescaling)
 010 > clkI/8 (From prescaler)
 011 > clk/64 (From prescaler)
 100 > clk/256 (From prescaler)
 101 > clk/1024 (From prescaler)
 110 > External clock source on T0 pin. Clock on falling edge
 111 > External clock source on T0 pin. Clock on rising edge
 */
#define NO_CLK                  10
#define CLK_NO_PRESCALING       20
#define CLK_8                   8
#define CLK_64                  64
#define CLK_256                 256
#define CLK_1024                1024
#define CLK_EXTERNAL_FALLING    30
#define CLK_EXTERNAL_RISING     40

#define CS00 0 
#define CS01 1
#define CS02 2 
/////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////
/*
 * Waveform Generation Mode
 00 > Normal
 01 > PWM, Phase Correct
 10 > CTC
 11 > Fast PWM
 */
#define Normal_MODE              0
#define PWM_Phase_Correct_MODE   1
#define CTC_MODE                 2
#define Fast_PWM_MODE            3

#define WGM00 6
#define WGM01 3
/////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////
/*
 * OC0 pin:
 *Compare Output Mode, non-PWM Mode
 00 >  Normal port operation, OC0 disconnected.
 01 >  Toggle OC0 on compare match
 10 >  Clear OC0 on compare match
 11 >  Set OC0 on compare match
 
 *Compare Output Mode, Fast PWM Mode
 
 *Compare Output Mode, Phase Correct PWM Mode
 
 */
#define OC0_pin_output OC0_TOGGLE

#define OC0_NORMAL 66
#define OC0_TOGGLE 77
#define OC0_CLEAR  88
#define OC0_SET    99

#define COM00 4
#define COM01 5
/////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////
/*
 *Force Output Compare
 */
#define FOC0 7
/////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////
#define SFIOR  (*((volatile u8 *)0x50)) //prescaler
#define PSR10 0     //Prescaler Reset Timer/Counter1 and Timer/Counter0  //When this bit is written to one, the Timer/Counter1 and Timer/Counter0 prescaler will be reset
/////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////
#endif

